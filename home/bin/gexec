#!/bin/sh
# Script to chroot into the glibc chroot (/mnt/glibc64) and launch an application
# This script is symlinked to /usr/local/bin to easily be run by root/sudo 

[ "$1" ] || { printf '%s\n' "${0##*/} requires a command to launch"; exit 1; }

# Check that the chroot is setup and set it up if it isn't
ghroot m /mnt/void

TERM=xterm-256color

GEXEC_ENV="XDG_RUNTIME_DIR=/run/user/1000 WAYLAND_DISPLAY=wayland-1 XDG_SESSION_TYPE=wayland"
GEXEC_ENV="$GEXEC_ENV DISPLAY=:0"

chroot /mnt/void su -c "$GEXEC_ENV $*" - mou
