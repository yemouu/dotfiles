#!/bin/sh

# Set Environment variables
QT_QPA_PLATFORMTHEME=gnome
SDL_VIDEODRIVER=wayland
XDG_SESSION_TYPE=wayland
export QT_QPA_PLATFORMTHEME SDL_VIDEODRIVER XDG_SESSION_TYPE

# Start new logging directory
moulog -n

# Autostart
{
	moulog syncthing -no-browser &
} &

# Pick Wayland Compositor
case $1 in
	sway|s    ) export XDG_CURRENT_DESKTOP=sway
	            exec moulog dbus-run-session sway ;;
	wayfire|w ) export XDG_CURRENT_DESKTOP=Wayfire
	            exec moulog dbus-run-session wayfire ;;
esac
